<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title></title>
		<script src="./js/jquery-3.4.1.min.js" type="text/javascript"></script>
		<script src="./js/jquery.backstretch.min.js" type="text/javascript"></script>
		<link href="./css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
		<script src="./js/bootstrap.min.js" type="text/javascript"></script>
		<link href="./font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		<link href="./css/Regist.css" type="text/css" rel="stylesheet" />
        <link href="https://fonts.font.im/css?family=Alice" rel="stylesheet">
		<link href="https://fonts.font.im/css?family=Croissant One" rel="stylesheet">
		<link href="./css/scrollbar-and-selection.css" rel="stylesheet" type="text/css">
        <script type="text/javascript">
				$(function(){
					
					$("body").backstretch([
						"./img/img01.jpg",
						"./img/img02.jpg",
						"./img/img03.jpg",
						"./img/img04.jpg"
					],{
						fade: 1000,
						duration:8000});
				});

				$(document).ready(function(){
					$("#wechat-icon").hover(function(){
						var obj = $("#authorMessage").text("Kinney: Kinney122****319\nReTayE: liyuliangy_u_riko");
						obj.html(obj.html().replace(/\n/g,'<br/>'));
						$("#wechat-icon").css("color","rgb(18, 110, 31)");
					},function(){
						$("#authorMessage").text("");
						$("#wechat-icon").css("color","rgb(0,173,25)");
					});
					$("#fb-icon").hover(function(){
						var obj = $("#authorMessage").text("Kinney: Kinney\nReTayE: None");
						obj.html(obj.html().replace(/\n/g,'<br/>'));
						$("#fb-icon").css("color","rgb(13,34,78)");
					},function(){
						$("#authorMessage").text("")
						$("#fb-icon").css("color","rgb(59, 89, 153)");
					});
					$("#twitter-icon").hover(function(){
						var obj = $("#authorMessage").text("Kinney: None\nReTayE: @TayEmikumi");
						obj.html(obj.html().replace(/\n/g,'<br/>'));
						$("#twitter-icon").css("color","rgb(59, 89, 153)");
					},function(){
						$("#authorMessage").text("");
						$("#twitter-icon").css("color","rgb(29, 161, 243)");
					});
					$("svg").hover(function(){
						var obj = $("#authorMessage").text("Kinney: None\nReTayE: None");
						obj.html(obj.html().replace(/\n/g,'<br/>'));
					},function(){
						$("#authorMessage").text("");
					});

                    $("#email").blur(function(){
					var email = $("#email").val();
					var i = 0;
					var t = 0;
					/*From Internet*/
					var reMail =/^(?:[a-zA-Z0-9]+[_\-\+\.]?)*[a-zA-Z0-9]+@(?:([a-zA-Z0-9]+[_\-]?)*[a-zA-Z0-9]+\.)+([a-zA-Z]{2,})+$/;
					var s = new RegExp(reMail);
					if(email==""||email==null){
						$("#email").addClass("is-invalid");
						$("#errorEmailMessage").removeClass("warning");
						$("#errorEmailMessage").addClass("error");
                        $("#errorEmailMessage").text("Email can't be empty!");
					}
					else{
					if(s.test(email)){
						$("#email").removeClass("is-invalid");
						$("#email").addClass("is-valid");
                        $("#errorEmailMessage").text("");
					}
					else{
						$("#email").addClass("is-invalid");
						$("#errorEmailMessage").removeClass("warning");
						$("#errorEmailMessage").addClass("error");
                        $("#errorEmailMessage").text("Invalid Email Address!");
					}
					}
					});


                    $("#password").blur(function(){
					//$("#password").attr("type","password");
					var pass = $("#password").val();
					if(pass==""||pass==null){
						$("#errorPassword").css("font-size","medium");
						$("#errorPassword").removeClass("warning");
						$("#errorPassword").addClass("error");
						$("#errorPassword").text("Password can't be empty");
						$("#password").addClass("is-invalid");
					}
					else{
						if(pass.length<=8){
							$("#errorPassword").removeClass("warning");
						$("#errorPassword").addClass("error");
							$("#errorPassword").text("Length is not enough");
							$("#password").addClass("is-invalid");
						}
						else{
						var i;
						var digit = 0;
						var upper = 0;
						var special = 0;
						for(i=0;i<pass.length;i++){
							if(pass[i]>='A'&&pass[i]<='Z'){
								upper++;
							}
							else if(pass[i]>='0'&&pass[i]<='9'){
								digit++;
							}
							else if(pass[i]<'a'||pass[i]>'z'){
								special++;
							}
						}
						if(upper>=1&&digit>=1&&special>=1){
							$("#errorPassword").text("");
                            $("#password").removeClass("is-invalid");
							$("#password").addClass("is-valid");
						}
						else{
							$("#errorPassword").removeClass("warning");
						$("#errorPassword").addClass("error");
							$("#errorPassword").text("Invalid password");
							$("#password").addClass("is-invalid");
						}
						}
					}
				});
				
				$("#password").hover(function(){
					$("#password").attr("type","text");
				},function(){
					$("#password").attr("type","password");
				});
				
				$("#retypePassword").hover(function(){
					$("#retypePassword").attr("type","text");
				},function(){
					$("#retypePassword").attr("type","password");
				});
				
				$("#retypePassword").blur(function(){
					//$("#retypePassword").attr("type","password");
					var password = $("#password").val();
					var repass = $("#retypePassword").val();
					if(repass==""||repass==null){
						$("#errorRePassword").removeClass("warning");
						$("#errorRePassword").addClass("error");
                        $("#retypePassword").addClass("is-invalid");
						$("#errorRePassword").text("Confirm password can't be empty!");
					}
					else{
					if(password!=repass){
						$("#errorRePassword").removeClass("warning");
						$("#errorRePassword").addClass("error");
                        $("#retypePassword").addClass("is-invalid");
						$("#errorRePassword").text("Not same with the password");
					}
					else{
                        $("#retypePassword").removeClass("is-invalid");
						$("#retypePassword").addClass("is-valid");
						$("#errorRePassword").text("");
					}
					}
				});

				$("#nickName").blur(function(){
					var i;
					var flag;
					var name = $("#nickName").val();
					if(name==""||name==null){
						$("#nickName").addClass("is-invalid");
						$("#errorNick").removeClass("warning");
						$("#errorNick").addClass("error");
						$("#errorNick").text("Nickname can't be empty!");
					}
					else{
					for(i=0,flag=0;i<name.length;i++){
						if(name[i]==' '){
							flag=1;
							break;
						}
					}
					if(flag==1){
						$("#nickName").addClass("is-invalid");
						$("#errorNick").removeClass("warning");
						$("#errorNick").addClass("error");
						$("#errorNick").text("Invalid Nickname!");
					}
					else{
						$("#nickName").removeClass("is-invalid");
						$("#nickName").addClass("is-valid");
						$("#errorNick").text("");
					}
					}
				});

				$("#registButton").click(function(){
					var email = $("#email").val();
					var nick = $("#nickName").val();
					var pass = $("#password").val();
					var con = $("#retypePassword").val();
					if(email==""||nick==""||pass==""||con==""){
						if(email==""){
							$("#errorEmailMessage").attr("class","error");
							$("#errorEmailMessage").text("Email can't be empty!");
							$("#email").addClass("is-invalid");
						}
						if(nick==""){
							$("#errorNick").attr("class","error");
							$("#errorNick").text("Nickname can't be empty!");
							$("#nickName").addClass("is-invalid");
						}
						if(pass==""){
							$("#errorPassword").attr("class","error");
							$("#errorPassword").css("font-size","medium");
							$("#errorPassword").text("Password can't be empty!");
							$("#password").addClass("is-invalid");
						}
						if(con==""){
							$("#errorRePassword").attr("class","error");
							$("#errorRePassword").text("Confirm password can't be empty!");
							$("#retypePassword").addClass("is-invalid");
						}
					}
					else{
						window.alert("Welcome to take part in DairyPad!");
						window.location.href="login.html";
					}
				});

				$("#nickName").focus(function(){
					$("#errorNick").attr("class","warning");
					$("#errorNick").text("*No space is allowed");
				});

				$("#password").focus(function(){
					$("#errorPassword").attr("class","warning");
					$("#errorPassword").css("font-size","small");
					$("#errorPassword").text("*At least 8 character, with at least one upper alphabet, one digit and one special character");
				});

				});
		</script>
	</head>
	<body>
		<div id="registPage" >
			<section id="Regist" class="rounded">
                <h1>DairyPad</h1>
                <section id="slogan">
                   Make your<br/> moment<br/>be precious
                </section>
				<form action="" method="get" id="input-form">
					<section class="form-group rounded" id="inputGroup">
                        <section id="EmailPart">
                            <input type="text" style="width: 100%; height: 40px;" class="form-control" placeholder="*Email:" id="email" />
                            <div id="errorEmailMessage" class="warning" style="height: 20px;"></div>
						</section>
						<section id="NickPart">
							<input type="text" style="width: 100%; height: 40px; margin-top: 10px;" class="form-control" placeholder="*Nick-name:" id="nickName"/>
							<div id="errorNick" class="warning" style="height: 20px;">*No space is allowed</div>
						</section>
                        <section id="PasswordPart">
                            <input type="password"  style="width: 100%; height: 40px; margin-top: 10px;" class="form-control" placeholder="*Password:" id="password"/>
                            <div id="errorPassword" class="warning" style="height: 20px;">*At least 8 character, with at least one upper alphabet, one digit and one special character</div>
                            <input type="password"  style="width: 100%; height: 40px; margin-top: 20px;" class="form-control" placeholder="*Confirm Password:" id="retypePassword"/>
                            <div id="errorRePassword" class="warning" style="height: 20px;"></div>
						</section>
						<input type="button" class="btn btn-primary" id="registButton" value="Regist Now!" />
					</section>
					
					<br/>
				</form>
				
				<section id="iconSet">
				<h6 style="text-align: center;">Contact us</h6>
				<i class="btn fa fa-facebook-square fa-3x" id="fb-icon"></i>
				<i class="btn fa fa-wechat fa-3x" id="wechat-icon"></i>
				<i class="btn fa fa-twitter fa-3x" id="twitter-icon"></i>
				<!-- <i class="btn" id="weibo-icon"></i> -->
				</section>
				
				<section id="authorMessage">
				</section>
				
			</section>
		</div>
		
	</body>
</html>
